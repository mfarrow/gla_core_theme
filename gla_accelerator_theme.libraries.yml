global:
  css:
    theme:
      dist/style.css: {}
      dist/utilities.css: {}
  dependencies:
    - gla_accelerator_theme/polyfill-io
    - gla_accelerator_theme/inert-polyfill
    - gla_accelerator_theme/what-input

# This library is mainly for IE11 and older browsers. We use the `nomodule` attribute to prevent newer browsers from
# loading it. This saves us an external, render blocking JS and HTTP request, so is good for TTI and FCP scores.
polyfill-io:
  header: true
  js:
    '//polyfill.io/v3/polyfill.min.js?flags=gated&features=default,es5,es6,es7,matchMedia,IntersectionObserver,ResizeObserver,NodeList.prototype.forEach,HTMLTemplateElement,Element.prototype.closest,requestAnimationFrame,CustomEvent,URLSearchParams':
      type: external
      minified: true
      weight: -100
      attributes: { nomodule: true }

inert-polyfill:
  js:
    libraries/wicg-inert/dist/inert.min.js: {}

what-input:
  js:
    libraries/what-input/dist/what-input.min.js: { minified: true }

# If the site uses a CSP that prevents unsafe-eval then we may need to load the CSP version of Alpine instead and
# refactor components to use it. See https://alpinejs.dev/advanced/csp for more information.
alpinejs:
  js:
    libraries/alpinejs/dist/cdn.js: {}

lazysizes:
  js:
    libraries/lazysizes/plugins/print/ls.print.min.js: {}
    libraries/lazysizes/plugins/unveilhooks/ls.unveilhooks.min.js: {}
    libraries/lazysizes/lazysizes.min.js:
      # Load Lazysizes as early as possible to help get images displayed
      # as quickly as possible. We are banking on the perceived performance
      # benefits of getting images on screen quicker being more important
      # than the performance costs of not aggregating this file.
      preprocess: false
      weight: -10
      attributes:
        async: ''
