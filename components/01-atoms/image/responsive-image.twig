{#
/**
 * @file
 * Default theme implementation of a responsive image.
 *
 * Available variables:
 * - sources: The attributes of the <source> tags for this <picture> tag.
 * - img_element: The controlling image, with the fallback image in srcset.
 * - output_image_tag: Whether or not to output an <img> tag instead of a
 *   <picture> tag.
 *
 * @see template_preprocess()
 * @see template_preprocess_responsive_image()
 *
 * @ingroup themeable
 */
#}
{% set responsive_image_base_class = responsive_image_base_class|default('image') %}

{% set img_element_attributes = img_element_attributes|default(create_attribute(img_element['#attributes']|default([]))) %}
{% if img_element['#width'] %}
  {% set img_element_attributes = img_element_attributes.setAttribute('width', img_element['#width']) %}
{% endif %}
{% if img_element['#height'] %}
  {% set img_element_attributes = img_element_attributes.setAttribute('height', img_element['#height']) %}
{% endif %}

{% if output_image_tag %}
  {% include "@atoms/04-images/00-image/_image.twig" with {
    image_base_class: responsive_image_base_class,
    image_modifiers: responsive_image_modifiers,
    image_blockname: responsive_image_blockname,
    image_extra_classes: responsive_image_extra_classes,
    image_srcset: image_srcset|default(img_element['#attributes'].srcset),
    image_sizes: image_sizes|default(img_element['#attributes'].sizes),
    image_src: image_src|default(img_element['#uri']),
    image_alt: image_alt|default(img_element['#alt']),
    image_title: image_title|default(img_element['#title']),
    attributes: img_element_attributes,
  } %}
{% else %}
  {% include "@atoms/04-images/00-image/_picture.twig" with {
    picture_base_class: responsive_image_base_class,
    picture_modifiers: responsive_image_modifiers,
    picture_blockname: responsive_image_blockname,
    picture_extra_classes: responsive_image_extra_classes,
    image_extra_classes: image_extra_classes,
    image_srcset: image_srcset|default(img_element['#attributes'].srcset),
    image_sizes: image_sizes|default(img_element['#attributes'].sizes),
    image_src: image_src|default(img_element['#uri']),
    image_alt: image_alt|default(img_element['#alt']),
    image_title: image_title|default(img_element['#title']),
    img_element_attributes: img_element_attributes,
  } %}
{% endif %}
