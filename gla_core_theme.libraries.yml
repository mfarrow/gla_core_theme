global:
  css:
    theme:
      dist/global.css: {}
      dist/utilities.css: {}
  dependencies:
    - gla_core_theme/polyfill-io
    - gla_core_theme/inert-polyfill
    - gla_core_theme/what-input
    - gla_core_theme/roboto

roboto:
  css:
    theme:
      # If you update or remove this then please also edit storybook/.storybook/preview-head.html.
      'https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap':
        type: external
        minified: true

# This library is mainly for IE11 and older browsers. We use the `nomodule` attribute to prevent newer browsers from
# loading it. This saves us an external (render blocking) JS and HTTP request, so is good for TTI and FCP scores.
polyfill-io:
  header: true
  js:
    '//polyfill.io/v3/polyfill.min.js?flags=gated&features=default,es5,es6,es7,matchMedia,IntersectionObserver,ResizeObserver,NodeList.prototype.forEach,HTMLTemplateElement,Element.prototype.closest,requestAnimationFrame,CustomEvent,URLSearchParams':
      type: external
      minified: true
      weight: -100
      attributes: { nomodule: true }

inert-polyfill:
  js:
    libraries/wicg-inert/dist/inert.min.js: { minified: true }

what-input:
  js:
    libraries/what-input/dist/what-input.min.js: { minified: true }

# If the site uses a CSP that prevents unsafe-eval then we may need to load the CSP version of Alpine instead and
# refactor components to use it. See https://alpinejs.dev/advanced/csp for more information.
alpinejs:
  js:
    libraries/alpinejs/dist/cdn.js: {}

# Until Safari supports native image lazyloading we'll need a library to help us with it.
lazysizes:
  js:
    libraries/lazysizes/plugins/print/ls.print.min.js: { minified: true }
    libraries/lazysizes/plugins/unveilhooks/ls.unveilhooks.min.js: { minified: true }
    libraries/lazysizes/lazysizes.min.js:
      # Load Lazysizes as early as possible to help get images displayed
      # as quickly as possible. We are banking on the perceived performance
      # benefits of getting images on screen quicker being more important
      # than the performance costs of not aggregating this file.
      preprocess: false
      minified: true
      weight: -10
      attributes:
        async: ''

fix-randomised-form-ids:
  js:
    dist/00-base/fix-randomised-form-ids.js: {}

admin-styles:
  css:
    theme:
      dist/admin-styles.css: {}
